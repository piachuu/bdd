# Informe Entrega 1 - Bases de datos IIC2413

### Datos del Alumno
| **Apellidos**       | **Nombres**          | **N√∫mero de Alumno** |
|---------------------|----------------------|----------------------|
| Correa Ocampo | Pia Andrea    |2221318J              |

- Nombre de la empresa: Gatitospokemon

### 1. Modelo Entidad-Relaci√≥n (E/R)
<!-- Inserta aqu√≠ tu diagrama ER. Usa el formato svg para evitar la perdida de calidad. Reemplaza "diagrama.svg" por la ruta a tu archivo -->

![Diagrama E/R](modeloerbddE1.drawio.png)

### 2. Entidades D√©biles
<!-- Justifica CADA entidad d√©bil identificada  -->
#### 2.1 Entidad_Plan_salud_ISAPRE
Esta fue la √∫nica identidad d√©bil que identifiqu√© ya que el plan de salud no tiene sentido por si s√≥lo si no est√° ligado a su isapre (cada isapre tiene un plan de salud), y al principio hab√≠a hecho la relaci√≥n directa de la entidad Isapre a Grupo Fonasa, pero como cada isapre tiene su plan, pens√© que as√≠ quedar√≠a m√°s claro.

### 3. Llaves Primarias  y Compuestas
<!-- Justifica TODAS las llaves: primaria simple y primaria compuesta -->
#### 3.1 Entidad_Persona
La llave primaria de __Entidad Persona__ es  __id_persona__ porque a mi citerio para cada persona era mejor crear esta surrogate key, para manejarla mejor sobretodo en el esquema y porque vimos en clases que muchas veces el rut no era buena primary key. Pens√© en que quiz√°s si tenemos trabajadores que tambi√©n pueden ser pacientes, no se nos dejar√≠a inscribir 2 veces el mismo rut.
* Aqu√≠ me confund√≠ un poco con el c√≥digo de isapre que aparece en el archivo __Personas.xlsx__, creo que lo hice pensando en cruzar tablas, porque como para la instituci√≥n previsional le puse de llave primaria id_instituci√≥n, en vez de poner el c√≥digo ministerial, decid√≠ cambiarlo al id de cada instituci√≥n en vez del c√≥digo ministerial. (nos√© si eso es legal üò≠)
#### 3.2 Entidad_Paciente
La llave primaria de __Entidad_Paciente__ es __id_persona__ porque es una entidad hija de __Entidad Persona__ y mantiene la misma llave primaria que la entidad padre.
#### 3.3 Entidad_Trabajador
La llave primaria de __Entidad_Trabajador__ es __id_persona__ porque es una entidad hija de __Entidad Persona__ y mantiene la misma llave primaria que la entidad padre.
#### 3.4 Entidad_Administrativo
La llave primaria de __Entidad_Administrativo__ es __id_persona__ porque es una entidad hija de __Entidad Trabajador__ y mantiene la misma llave primaria que la entidad padre.
#### 3.5 Entidad_Staff_M√©dico
La llave primaria de __Entidad Staff M√©dico__ es __id_persona__ porque es una entidad hija de __Entidad Trabajador__ y mantiene la misma llave primaria que la entidad padre.
* A esta entidad decid√≠ agregarle el atributo profesi√≥n que aparece como dato en el archivo __Personas.xlsx__, ya que se supone que s√≥lo staff de profesi√≥n m√©dico pueden generar √≥rdenes y recetas y realizar consultas m√©dicas. Antes lo hab√≠a puesto en Trabajador, pero como suspuse que ning√∫n andministrativo ser√≠a m√©dico, quise ponerlo en la entidad __Entidad Staff M√©dico__.
#### 3.6 Entidad_M√©dico
La llave primaria de __Entidad M√©dico__ es __id_persona__ porque es la entidad hija de __Entidad Staff M√©dico__ y mantiene la misma llave primaria que la entidad padre.
#### 3.7 Entidad_Instituci√≥n_previsional
La llave primaria de __Entidad Instituci√≥n previsional__ es __id_instituci√≥n__ porque decid√≠ crear esta surrogate key para manejar mejor las instituciones. Podr√≠a haber usado el c√≥digo ministerial pero decid√≠ "irme a la segura" con la surrogte key para identificar cada instituci√≥n: Isapre √≥ Fonasa.
#### 3.8 Entidad_Isapre
La llave primaria de __Entidad Isapre__ es __id_instituci√≥n__ porque es una entidad hija de __Entidad Instituci√≥n previsional__ y mantiene la misma llave primaria que la entidad padre.
#### 3.9 Entidad_Fonasa
La llave primaria de __Entidad Fonasa__ es __id_instituci√≥n__ porque es una entidad hija de __Entidad Instituci√≥n previsional__ y mantiene la misma llave primaria que la entidad padre.
#### 3.10 Entidad_Plan_salud_ISAPRE
La llave parcial de __Entidad Plan salud ISAPRE__ es la llave compuesta (__id_instituci√≥n__, __nombre__) porque es una entidad d√©bil, y depende de __Entidad Isapre__, entonces su llave se compone de un de sus atributos y la llave de la identidad a la que depende.
#### 3.11 Entidad_Grupo_Arancel_Fonasa
La llave primaria de __Entidad Grupo Arancel Fonasa__ es __id_grupo__ porque para identificar a cada grupo cr√≠ que ser√≠a mejor crear una surrogate key, por qu eventualmente el nombre del grupo podr√≠a cambiar √≥ cosas de ese estilo.
* Decid√≠ hacer el grupo una entidad por si sola para relacionar de manera directa cada grupo con su bonificaci√≥n seg√∫n el plan de cada isapre, espec√≠ficamente para la regla de negocio n¬∞ 7, as√≠ quedar√≠a m√°s directo y m√°s claro.
#### 3.12 Entidad_Consulta_m√©dica
La llave primaria de __Entidad Consulta m√©dica__ es la llave __id_consulta__ (surrogate key) para identificar cada consulta y/o atenci√≥n m√©dica, ya que el nombre podr√≠a cambiar.
* Esta entidad la cre√© para identificar cada consulta, y le agregu√© atributos de diagnostico, fecha, id_medico y id_paciente. Los id los obtengo como foreign key de Paciente(id_persona) y M√©dico(id_persona).
#### 3.13 Entidad_Receta
La llave primaria de __Entidad Receta__ es la llave __id_receta__ (surrogate key) para identificar cada receta, sobretodo porque en los ejemplos y en el enunciado se habla de un conjunto de medicamentos y no s√≥lo un medicamento. Le agregu√© el tipo de receta, para saber si  es f√°rmacos, refrigerados, sueros √≥ psicotr√≥picos. Adem√°s del atributo c√≥digo_autorizaci√≥n que ser√≠a s√≥lo para las recetas de psicotr√≥picos. 
* La identificaci√≥n del paciente y del m√©dico, la obtengo de la consulta m√©dica ya que esta genera una receta, y si pon√≠a los mismos atributos iba a quedar muy redundante. 
* Tambi√©n pens√© en c√≥mo encontrar√≠a un medicamento en Maestro Farmacia, pero es un conjunto de medicamentos y tanto en el ejemplo como el enunciado solo se mencionan los nombres de los medicamentos, no los c√≥digos gen√©ricos, o alguno de los atributos de Maestro Farmacia.
#### 3.14 Entidad_Orden
La llave primaria de __Entidad Orden__ es la llave __id_orden__ (surrogate key) para identificar cada orden, porque al igual que en los ejemplos y en el enunciado se habla de un conjunto de ex√°menes y no s√≥lo un examen. Le agregu√© tambi√©n la firma_doc, no s√© si sea necessaria, la puse solamente porque el enunciado lo mencionaba.
* Al igual que en __Entidad Receta__, la identificaci√≥n del paciente y del m√©dico, la obtengo de la consulta m√©dica.
* Tambi√©n pens√© en c√≥mo encontrar√≠a un examen en Arancel Fonasa, pero es un conjunto de ex√°menes y tanto en el ejemplo como el enunciado solo se mencionan los nombres de los ex√°menes, no los c√≥digos de fonasa, o alguno de los atributos de Arancel Fonasa.
#### 3.15 Entidad_Arancel_Fonasa
La llave primaria de __Entidad Arancel Fonasa__ es la llave compuesta (__c√≥digo__, __c√≥digo_adicional__) porque seg√∫n lo que observ√© en el archivo __Arancelfonasa.xlsx__ el c√≥digo va aumentando en uno al igual que un id, y para asegurame le agregu√© el c√≥digo adicional.
* Ac√° al abrir el archivo __Arancelfonasa.xlsx__ en la columna de C√≥digo Adicional no me aparec√≠a nada, pero como pregunt√© en una issue cuales eran sus columnas, me dijeron que es s√≠. Es decir, si tiene valores y en ninguna parte se especifica si tiene valores nulos o no.
#### 3.16 Entidad_Maestro_Farmacia
La llave primaria de __Entidad Maestro Farmacia__ es la llave __c√≥digo_gen√©rico__ porque al ver el archivo __MaestroFramacia.xlsx__, el c√≥digo gen√©rico va aumentando en 1 al igual que un id, por eso decid√≠ que ser√≠a una buena llave primaria.
#### 3.17 Entidad_Arancel_DCColita_de_rana
La llave primaria de __Entidad Arancel DCColita de rana__ es la llave __c√≥digo_fonasa__ porque en el enunciado dice que corresponde al c√≥digo + c√≥digo adicional, y al ser esa a llave de la __Entidad Arancel Fonasa__, decid√≠ que ser√≠a una buena llave primaria de esta entidad.

### 4. Relaciones
<!-- Justifica TODAS las relaciones de tu modelo -->
#### 4.1 Relacion_afiliada
Relaciona la __Entidad Persona__ y la __Entidad Instituci√≥n previsional__, porque una persona contrata una instituci√≥n previsional sea Isapre o Fonasa, √≥ tambi√©n puede ser particular. (se explica en la cardinalidad)
A esta relai√≥n le agregu√© el atributo __tipo__ que representa si la persona es titular √≥ beneficiario.
* Para esto no supe c√≥mo representar las reglas de beneficiario y titular, en un principio hab√≠a hecho una entidad Titular y otra Beneficiario, y ambas se relacionaban con Instituci√≥n, pero quedaba redundante y extra√±o. 
#### 4.2 Relacion_tiene
Relaciona la __Entidad Isapre__ y la __Entidad Plan salud ISAPRE__ (entidad d√©bil), porque cada isapre tiene su propio plan de salud, y el el plan de salud necesita la isapre para existir.
#### 4.3 Relacion_bonificaci√≥n
Relaciona la __Entidad Plan salud ISAPRE__ y la __Entidad Grupo Arancel Fonasa__, porque un plan de salud bonifica a cada grupo del arancel fonasa. Esta relaci√≥n incluye el atributo __porcentaje__ porquela bonificaci√≥n de la isapre consiste en el porcentaje de bonificaci√≥n por cada grupo.
#### 4.4 Relacion_realiza
Relaciona la __Entidad M√©dico__ y la __Entidad Consulta M√©dica__, porque un m√©dico realiza las consultas y/o atenciones m√©dicas.
#### 4.5 Relacion_emite
Relaciona la __Entidad M√©dico__ y la __Entidad Receta__, porque el m√©dico es qui√©n emite recetas de medicamentos.
Tambi√©n relaciona la __Entidad M√©dico__ y la __Entidad Orden__, porque el m√©dico es qui√©n emite √≥rdenes de ex√°menes y procedimientos.
#### 4.6 Relacion_se_genera
Relaciona la __Entidad Consulta M√©dica__ y la __Entidad Receta__, porque en una consulta m√©dica se generan las recetas de medicamentos.
Tambi√©n relaciona la __Entidad Consulta M√©dica__ y la __Entidad Orden__, porque en una consulta m√©dica se generan las √≥rdenes de ex√°menes y procedimientos.
#### 4.7 Relacion_registrada_en
Relaciona la __Entidad Receta__ y la __Entidad Maestro Farmacia__, porque la recetas est√°n registradas en Maestro Farmacia.
Tambi√©n relaciona la __Entidad Orden__ y la __Entidad Arancel Fonasa__, porque las √≥rdenes y procedimientos est+an registradas en Arancel Fonasa.
#### 4.8 Relacion_se_conecta_con
Relaciona la __Entidad Arancel Fonasa__ y la __Entidad Arancel DCColita de rana__, porque seg√∫n el enunciado, si el paciente no est√° afiliado a Fonasa, se cobr el valor particular del centro m√©dico, y si es Ispre se aplica la bonificaci√≥n. Entonces para saber el valor del centro, se busca el c√≥digo_fonasa de Arancel Fonasa y se ve el precio, por esto est√°n conectados.
#### 4.9 Relacion_es_de
Relaciona la __Entidad Arancel Fonasa__ y la __Entidad Grupo Arancel Fonasa__, porque, el grupo de Arancel Fonasa se obtiene de Arancel Fonasa, para luego hacer la bonificaci√≥n seg√∫n la Isapre.

### 5. Cardinalidades
<!-- Explica la cardinalidad en CADA relaci√≥n del modelo -->
#### 5.1 Entidad_Persona - Entidad_Instituci√≥n_previsional (0 a 1 -- n)
- Una instancia de **Entidad_Persona** puede estar asociada con cero o una instancias de **Entidad_Instituci√≥n_previsional**. Osea que una persona puede o no estar afiliada a una instituci√≥n previsional.
- Cada instancia de **Entidad_Instituci√≥n_previsional** se relaciona con n instancias de **Entidad_Persona**. Es decir, que una instituci√≥n previsional puede tener muchas personas afiliadas.
#### 5.2 Entidad_Isapre - Entidad_Plan_salud_ISAPRE (1 -- 1)
- Una instancia de **Entidad_Isapre** est√° asociada exactamente a una instancia de **Entidad_Plan_salud_ISAPRE**. Es decir, que cada isapre tiene s√≥lo 1 plan de salud.
- Cada instancia de **c** se relaciona con n instancias de **Entidad_Isapre**. Es decir, que cada plan de salud pertenece s√≥lo a 1 isapre.
#### 5.3 Entidad_Plan_salud_ISAPRE - Entidad_Grupo_Arancel_Fonasa (1 a n -- 1 a n)
- Una instancia de **Entidad_Plan_salud_ISAPRE** puede estar asociada a una o m√°s instancias de **Entidad_Grupo_Arancel_Fonasa**. Es decir, que plan de salud tiene 1 o m√°s grupos con porcentaje de bonificaci√≥n.
- Cada instancia de **Entidad_Grupo_Arancel_Fonasa** puede estar asociada a una o m√°s instancias de **Entidad_Plan_salud_ISAPRE**. Es decir, que cada grupo del arancel fonasa, puede tener 1 o m√°s planes de salud par el cual bonifica la isapre.
#### 5.4 Entidad_M√©dico - Entidad_Consulta_M√©dica (n -- 1)
- Una instancia de **Entidad_M√©dico** puede estar asociada a n instancias de **Entidad_Consulta_M√©dica**. Es decir, que un m√©dico puede realizar muchas consultas.
- Cada instancia de **Entidad_Consulta_M√©dica** puede estar asociada a exactamente una instancia de **Entidad_M√©dico**. Es decir, que una consulta s√≥lo puede realizada por un m√©dico.
#### 5.5 Entidad_M√©dico - Entidad_Receta(n -- 1)
- Una instancia de **Entidad_M√©dico** puede estar asociada a n instancias de **Entidad_Receta**. Es decir, que un m√©dico puede emitir muchas recetas.
- Cada instancia de **Entidad_Receta** puede estar asociada a exactamente una instancia de **Entidad_M√©dico**. Es decir, que una receta s√≥lo puede ser emitida por un m√©dico.
#### 5.6 Entidad_M√©dico - Entidad_Orden(n -- 1)
- Una instancia de **Entidad_M√©dico** puede estar asociada a n instancias de **Entidad_Orden**. Es decir, que un m√©dico puede emitir muchas √≥rdenes.
- Cada instancia de **Entidad_Orden** puede estar asociada a exactamente una instancia de **Entidad_M√©dico**. Es decir, que una orden s√≥lo puede ser emitida por un m√©dico.
#### 5.7 Entidad_Consulta_M√©dica - Entidad_Receta(0 a n -- 1)
- Una instancia de **Entidad_Consulta_M√©dica** puede estar asociada de 0 a n instancias de **Entidad_Receta**. Es decir, que en una consulta m√©dica se pueden generar 0 o m√°s recetas.
- Cada instancia de **Entidad_Receta** puede estar asociada a exactamente una instancia de **Entidad_Consulta_M√©dica**. Es decir, que una receta s√≥lo puede ser generada por 1 consulta m√©dica.
#### 5.8 Entidad_Consulta_M√©dica - Entidad_Orden(0 a n -- 1)
- Una instancia de **Entidad_Consulta_M√©dica** puede estar asociada de 0 a n instancias de **Entidad_Orden**. Es decir, que en una consulta m√©dica se pueden generar 0 o m√°s √≥rdenes.
- Cada instancia de **Entidad_Orden** puede estar asociada a exactamente una instancia de **Entidad_Consulta_M√©dica**. Es decir, que una orden s√≥lo puede ser generada por 1 consulta m√©dica.
#### 5.9 Entidad_Receta - Entidad_Maestro_Farmacia(n -- n)
- Una instancia de **Entidad_Receta** puede estar asociada a n instancias de **Entidad_Maestro_Farmacia**. Es decir, que muchas recetas pueden estar registradas en Maestro Farmacia, que a la vez tienen varios medicamentos.
- Cada instancia de **Entidad_Maestro_Farmacia** puede estar asociada a n instancias de **Entidad_Receta**. Es decir, que un medicamento de Maestro farmacia puede estar registrado muchas veces en muchas recetas.
#### 5.10 Entidad_Orden - Entidad_Arancel_Fonasa(n -- n)
- Una instancia de **Entidad_Orden** puede estar asociada a n instancias de **Entidad_Arancel_Fonasa**. Es decir, que muchas √≥rdenes pueden estar registradas en Arancel Fonasa, que a la vez tiene varios ex√°menes.
- Cada instancia de **Entidad_Arancel_Fonasa** puede estar asociada a n instancias de **Entidad_Orden**. Es decir, que un examen de Arancel Fonasa puede estar registrado muchas veces en muchas √≥rdenes.
#### 5.11 Entidad_Arancel_Fonasa - Entidad_Arancel_DCColita_de_rana(1 -- 1)
- Una instancia de **Entidad_Arancel_Fonasa** est√° asociada exactamente a una instancia de **Entidad_Arancel_DCColita_de_rana**. Es decir, que cada arancel de fonasa est√° asociado solo a un arancel del centro m√©dico. (c√≥digo fonasa -> c√≥digo + c√≥digo adicional)
- Cada instancia de **Entidad_Arancel_DCColita_de_rana** est√° asociada exactamente a una instancia de **Entidad_Arancel_Fonasa**. Es decir, que cada arancel del centro m√©dico est√° asociado s√≥lo a un arancel fonasa.
#### 5.12 Entidad_Grupo_Arancel_Fonasa - Entidad_Arancel_Fonasa(n -- 1)
- Una instancia de **Entidad_Grupo_Arancel_Fonasa** puede estar asociada a n instancias de **Entidad_Arancel_Fonasa**. Es decir, que a cada grupo pueden pern¬øtenecer muchos aranceles.
- Cada instancia de **Entidad_Arancel_Fonasa** est√° asociada exactamente a una instancia de **Entidad_Grupo_Arancel_Fonasa**. Es decir, que cada arancel fonasa est√° asociado s√≥lo a un grupo.


### 6. Jerarqu√≠as
<!-- Identifica y justifica TODAS las jerarqu√≠as -->
#### 6.1 Entidad_Persona - Entidad_Paciente- Entidad_Trabajador
Se modelo una jerarqu√≠a donde **Entidad_Persona** es la entidad padre y **Entidad_Paciente** y **Entidad_Trabajador** heredan de ella, porque se tiene e archivo __Personas.xlsx__ con todos sus datos, adem√°s una persona puede ser empleado del centro m√©dico y a la vez paciente, por esto quise modelar que de Persona se puede ser Paciente, Trabajador, √≥ ambas. Para exprear el solapamiento, escrib√≠ "Paciente OVERLAPS
Staff m√©dico", esto lo vi en el libro del curso en donde se habla de jerarqu√≠a, espec√≠ficamente en la p√°gina 37 y 38.
#### 6.2 Entidad_Trabajador - Entidad_Administrativo- Entidad_Staff_m√©dico
Se modelo una jerarqu√≠a donde **Entidad_Trabajador** es la entidad padre y **Entidad_Administrativo** y **Entidad_Staff_m√©dico** heredan de ella, porque dentro de los trabajadores del centro, pueden ser Administrativos o Staff m√©dico. En verdad no s√© si esto st√© correcto pero quer√≠a expresar que existen 2 tipo de empleados, que a la vez son personas registradas en la base de datos.
#### 6.3 Entidad_Staff_m√©dico - Entidad_M√©dico
Se modelo una jerarqu√≠a donde **Entidad_Staff_m√©dico** es la entidad padre y **Entidad_M√©dico** hereda de ella, porque dentro del staff m√©dico, s√≥lo los empleados con profesi√≥n m√©dico, pueden realizar consultas, emitir recetas y √≥rdenes. Lo model√© como jerarqu√≠a ya que m√©dicos es una especializaci√≥n del staff m√©dico, que al mismo tiempo son trabajadores, y tambi√©n personas registradas en la base de datos.
* Ac√° la entidad M√©dico la hice s√≥lo porque se pidi√≥ que s√≥lo m√©dicos pod√≠an hacer estas cosas, de hecho en la ayudant√≠a para la E1 se pregunt√≥ esto, y nos hab√≠an dicho que daba lo mismo la profesi√≥n, s√≥lo bastaba con que fuera staff m√©dico.
#### 6.4 Entidad_Instituci√≥n_previsional - Entidad_Isapre- Entidad_Fonasa
Se modelo una jerarqu√≠a donde **Entidad_Instituci√≥n_previsional** es la entidad padre y **Entidad_Isapre** y **Entidad_Fonasa** heredan de ella, porque dentro de las instituciones previsionales est√°n las isapres y fonasa, entonces estas son especializaciones de las instituciones y tienen los mismos atributos, por esto decid√≠ modelarlo como jerarqu√≠a.

### 7. Esquema Relacional
<!-- Construye el esquema relacional a partir de tu Modelo E/R -->

- **Entidad_Persona**( <u>id_persona</u>: SERIAL, nombre: VARCHAR, apellido: VARCHAR, RUN: INT, correo: VARCHAR, direcci√≥n: VARCHAR, tel√©fono: INT, rol: VARCHAR, id_instituci√≥n: SERIAL, FOREIGN KEY(id_instituci√≥n) REFERENCES Instituci√≥nPrevisional(id_instituci√≥n))  
- **Entidad_Paciente**( <u>id_persona</u>: SERIAL, nombre: VARCHAR, apellido: VARCHAR, RUN: INT, correo: VARCHAR, direcci√≥n: VARCHAR, tel√©fono: INT, rol: VARCHAR, id_instituci√≥n: SERIAL, FOREIGN KEY(id_instituci√≥n) REFERENCES Instituci√≥nPrevisional(id_instituci√≥n)) 
- **Entidad_Trabajador**( <u>id_persona</u>: SERIAL, nombre: VARCHAR, apellido: VARCHAR, RUN: INT, correo: VARCHAR, direcci√≥n: VARCHAR, tel√©fono: INT, rol: VARCHAR, id_instituci√≥n: SERIAL, FOREIGN KEY(id_instituci√≥n) REFERENCES Instituci√≥nPrevisional(id_instituci√≥n))
- **Entidad_Administrativo**( <u>id_persona</u>: SERIAL, nombre: VARCHAR, apellido: VARCHAR, RUN: INT, correo: VARCHAR, direcci√≥n: VARCHAR, tel√©fono: INT, rol: VARCHAR, id_instituci√≥n: SERIAL, FOREIGN KEY(id_instituci√≥n) REFERENCES Instituci√≥nPrevisional(id_instituci√≥n))
- **Entidad_Staff_m√©dico**( <u>id_persona</u>: SERIAL, nombre: VARCHAR, apellido: VARCHAR, RUN: INT, correo: VARCHAR, direcci√≥n: VARCHAR, tel√©fono: INT, rol: VARCHAR, id_instituci√≥n: SERIAL, profesi√≥n: VARCHAR, FOREIGN KEY(id_instituci√≥n) REFERENCES Instituci√≥nPrevisional(id_instituci√≥n))
- **Entidad_M√©dico**( <u>id_persona</u>: SERIAL, nombre: VARCHAR, apellido: VARCHAR, RUN: INT, correo: VARCHAR, direcci√≥n: VARCHAR, tel√©fono: INT, rol: VARCHAR, id_instituci√≥n: SERIAL, profesi√≥n: VARCHAR, FOREIGN KEY(id_instituci√≥n) REFERENCES Instituci√≥nPrevisional(id_instituci√≥n))
- **Entidad_Instituci√≥n_previsional**( <u>id_instituci√≥n</u>: SERIAL, nombre: VARCHAR, tipo: VARCHAR, RUT: INT, enlace: VARCHAR, c√≥digo_ministerial: INT)
- **Relaci√≥n_Afiliaci√≥n**( <u>Persona.id_persona</u>: SERIAL, <u>Instituci√≥nPrevisional.id_instituci√≥n</u>: SERIAL, tipo: VARCHAR)
- **Entidad_Isapre**( <u>id_instituci√≥n</u>: SERIAL, nombre: VARCHAR, tipo: VARCHAR, RUT: INT, enlace: VARCHAR, c√≥digo_ministerial: INT)
- **Entidad_Fonasa**( <u>id_instituci√≥n</u>: SERIAL, nombre: VARCHAR, tipo: VARCHAR, RUT: INT, enlace: VARCHAR, c√≥digo_ministerial: INT)
- **Entidad_Plan_Salud_Isapre**( <u>Isapre.id_instituci√≥n</u>: SERIAL, <u>nombre</u>: VARCHAR)
- **Entidad_Grupo_Arancel_Fonasa**( <u>id_grupo</u>: SERIAL, nombre: VARCHAR)
- **Relaci√≥n_Bonificaci√≥n**( <u>PlanSaludIsapre.id_instituci√≥n</u>: SERIAL, <u>PlanSaludIsapre.nombre</u>: VARCHAR, <u>GrupoArancelFonasa.id_grupo</u>: SERIAL, porcentaje: INT)
- **Entidad_Consulta_M√©dica**( <u>id_consulta</u>: SERIAL, diagnostico: VARCHAR, fecha: DATE, id_medico: SERIAL, id_paciente: SERIAL, FOREIGN KEY(id_medico) REFERENCES M√©dico(id_persona), FOREIGN KEY(id_paciente) REFERENCES Paciente(id_persona))
- **Entidad_Receta**( <u>id_receta</u>: SERIAL, tipo_receta: VARCHAR, c√≥digo_autorizaci√≥n: SERIAL, id_consulta: SERIAL)
- **Entidad_Orden**( <u>id_orden</u>: SERIAL, firma_doctor: BOOL, id_consulta: SERIAL)
- **Entidad_Arancel_Fonasa**( <u>c√≥digo</u>: SERIAL, <u>c√≥digo_adicional</u>: SERIAL, consulta: VARCHAR, valor_fonasa: INT, tipo: VARCHAR)
- **Entidad_Maestro_Farmacia**( <u>c√≥digo_gen√©rico</u>: SERIAL, nombre: VARCHAR, precio: INT, descripci√≥n: VARCHAR, tipo: VARCHAR, c√≥digo_onu: SERIAL, clasificaci√≥n_onu: VARCHAR, clasificaci√≥n_interna: VARCHAR, estado_codigo_generico: VARCHAR, canasta: INT)
- **Entidad_Arancel_DCColita_de_rana**( <u>c√≥digo_fonasa</u>: SERIAL, codigo_interno: SERIAL, consulta: VARCHAR, valor: INT, FOREIGN KEY(c√≥digo_fonasa) REFERENCES ArancelFonasa(c√≥digo, c√≥digo_adicional))


### 8. Consistencia y Normalizaci√≥n en BCNF
<!-- Justifica la consistencia del esquema y su cumplimiento de BCNF -->

- **Consistencia:**
- La verdad no s√© muy bien qu√© poner aqu√≠, pero creo que mi modelo:
* Si mantiene la fidelidad al problema.
* No hay redundancia de datos (a mi criterio).
* Eleg√≠ correctamente entidades y relaciones.
* No lo compliqu√© m√°s de lo necesario.
* Eleg√≠ buenas llaves primarias.
- Lo √∫nico que creo que no sup hacer fueron la reglas de negocios son restricciones de titular/beneficiario, lo de que staff m√©dico si es paciente s√≥lo puede ser titular, y lo de BCNF porque me cuesta mucho.
    
- **Normalizaci√≥n en BCNF**:
- **Persona**( <u>id_persona</u>: SERIAL, nombre: VARCHAR, apellido: VARCHAR, RUN: INT, correo: VARCHAR, direcci√≥n: VARCHAR, tel√©fono: INT)
* Quit√© rol porque si lo tuviera, no estar√≠a cumpliendo 1NF, y tambi√©n quit√© id_instituci√≥n para ponerlo en la tabla **Afiliaci√≥n**.
- **Paciente**( <u>id_persona</u>: SERIAL)
- **Trabajador**( <u>id_persona</u>: SERIAL)
- **Administrativo**( <u>id_persona</u>: SERIAL)
- **StaffMedico**( <u>id_persona</u>: SERIAL, profesion: VARCHAR)
- **Medico**( <u>id_persona</u>: SERIAL, profesion: VARCHAR)
* Ac√° quit√© los dem√°s atributos heredados ya que todo se puede conseguir con un join con el id_persona... la verdad me cuesta mucho entender BCNF as√≠ que perd√≥n si est√° muy mal ‚òπÔ∏è.
- **InstitucionPrevisional**( <u>id_instituci√≥n</u>: SERIAL, nombre: VARCHAR, tipo: VARCHAR, RUT: INT, enlace: VARCHAR, c√≥digo_ministerial: INT)
- **Afiliaci√≥n**( <u>Persona.id_persona</u>: SERIAL, <u>Instituci√≥nPrevisional.id_instituci√≥n</u>: SERIAL, tipo: VARCHAR)
- **Isapre**( <u>id_instituci√≥n</u>: SERIAL)
- **Fonasa**( <u>id_instituci√≥n</u>: SERIAL)
- **PlanSaludIsapre**( <u>Isapre.id_instituci√≥n</u>: SERIAL, <u>nombre</u>: VARCHAR)
- **GrupoArancelFonasa**( <u>id_grupo</u>: SERIAL, nombre: VARCHAR)
- **Bonificaci√≥n**( <u>PlanSaludIsapre.id_instituci√≥n</u>: SERIAL, <u>GrupoArancelFonasa.id_grupo</u>: SERIAL, porcentaje: INT)
* Ac√° saqu√© el nombre de PlanSaludIsapre porque encontr√© que quedaba redundante.
- **ConsultaMedica**( <u>id_consulta</u>: SERIAL, diagnostico: VARCHAR, fecha: DATE, id_medico: SERIAL, id_paciente: SERIAL, FOREIGN KEY(id_medico) REFERENCES M√©dico(id_persona), FOREIGN KEY(id_paciente) REFERENCES Paciente(id_persona))
- **Receta**( <u>id_receta</u>: SERIAL, tipo_receta: VARCHAR, c√≥digo_autorizaci√≥n: SERIAL, id_consulta: SERIAL)
- **Orden**( <u>id_orden</u>: SERIAL, firma_doctor: BOOL, id_consulta: SERIAL)
- **Arancel_Fonasa**( <u>c√≥digo</u>: SERIAL, <u>c√≥digo_adicional</u>: SERIAL, consulta: VARCHAR, valor_fonasa: INT, tipo: VARCHAR)
- **MaestroFarmacia**( <u>c√≥digo_gen√©rico</u>: SERIAL, nombre: VARCHAR, precio: INT, descripci√≥n: VARCHAR, tipo: VARCHAR, c√≥digo_onu: SERIAL, clasificaci√≥n_onu: VARCHAR, clasificaci√≥n_interna: VARCHAR, estado_codigo_generico: VARCHAR, canasta: INT)
- **ArancelDCColita**( <u>c√≥digo_fonasa</u>: SERIAL, codigo_interno: SERIAL, consulta: VARCHAR, valor: INT, FOREIGN KEY(c√≥digo_fonasa) REFERENCES ArancelFonasa(c√≥digo, c√≥digo_adicional))